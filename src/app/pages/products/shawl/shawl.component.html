

<!-- Floating Back Button -->
<button 
  class="floating-back-button"
  [class.visible]="backButtonVisible()"
  [routerLink]="['/products']"
  aria-label="Back to Products">
  <span class="material-symbols-outlined">arrow_back</span>
  <span class="button-text">Back</span>
</button>

@if (product$ | async; as product) {
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-image-container">
      <img 
        [src]="product.heroImage" 
        alt="{{ product.name }}" 
        class="hero-image" 
        loading="eager" />
      <div class="hero-overlay"></div>
    </div>
    <div class="hero-content">
      <nav class="breadcrumb">
        <a [routerLink]="['/']">Home</a>
        <span class="separator">›</span>
        <a [routerLink]="['/products']">Products</a>
        <span class="separator">›</span>
        <span class="current">{{ product.name }}</span>
      </nav>
      <div class="product-header">
        <div class="product-icon">{{ product.icon }}</div>
        <h1 class="product-title">{{ product.name }}</h1>
        <p class="product-category">{{ product.category }}</p>
        <div class="product-badge" *ngIf="product.badge">{{ product.badge }}</div>
      </div>
    </div>
  </section>

  <!-- Product Details Section -->
  <section class="product-details-section">
    <div class="container">
      <div class="product-details-grid">
        <!-- Description Card -->
        <div class="info-card">
          <div class="card-header">
            <span class="material-symbols-outlined">description</span>
            <h3>Description</h3>
          </div>
          <div class="card-content">
            <p>{{ product.description }}</p>
          </div>
        </div>

        <!-- Features Card -->
        <div class="info-card">
          <div class="card-header">
            <span class="material-symbols-outlined">star</span>
            <h3>Features</h3>
          </div>
          <div class="card-content">
            <ul class="feature-list">
              @for (feature of product.features; track $index) {
                <li>{{ feature }}</li>
              }
            </ul>
          </div>
        </div>

        <!-- Benefits Card -->
        <div class="info-card">
          <div class="card-header">
            <span class="material-symbols-outlined">favorite</span>
            <h3>Benefits</h3>
          </div>
          <div class="card-content">
            <ul class="benefit-list">
              @for (benefit of product.benefits; track $index) {
                <li>{{ benefit }}</li>
              }
            </ul>
          </div>
        </div>

        <!-- Usage Card -->
        <div class="info-card">
          <div class="card-header">
            <span class="material-symbols-outlined">info</span>
            <h3>Usage</h3>
          </div>
          <div class="card-content">
            <p>{{ product.usage }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Section -->
  <section class="gallery-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Product Gallery</h2>
        <p class="section-subtitle">Explore our beautiful {{ product.name | lowercase }} collection</p>
      </div>
      
      <div class="gallery-grid">
        @for (image of product.images; track trackByImageId($index, image)) {
          <div class="gallery-item" [attr.data-index]="$index">
            <div class="image-container">
              <img 
                [src]="image.src" 
                [alt]="image.alt"
                class="gallery-image"
                loading="lazy">
            </div>
            @if (image.caption) {
              <p class="image-caption">{{ image.caption }}</p>
            }
          </div>
        }
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="cta-title">Interested in {{ product.name }}?</h2>
        <p class="cta-subtitle">{{ product.availability }}</p>
        <div class="cta-buttons">
          <a [routerLink]="['/outlets']" class="cta-button primary">
            Find Outlets
            <span class="material-symbols-outlined">location_on</span>
          </a>
          <a [routerLink]="['/contact']" class="cta-button secondary">
            Contact Us
            <span class="material-symbols-outlined">phone</span>
          </a>
        </div>
      </div>
    </div>
  </section>
} @else if (loading) {
  <!-- Loading State -->
  <div class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Loading product details...</p>
  </div>
} @else if (error) {
  <!-- Error State -->
  <div class="error-container">
    <div class="error-icon">⚠️</div>
    <h2 class="error-title">Product Not Found</h2>
    <p class="error-message">Sorry, we couldn't find the product you're looking for.</p>
    <a [routerLink]="['/products']" class="error-button">Back to Products</a>
  </div>
}