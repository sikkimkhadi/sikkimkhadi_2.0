<div class="production-container">
  <!-- Hero Section -->
  <section class="hero-section" *ngIf="productionData$ | async as data">
    <div class="hero-background">
      <div class="floating-icons">
        <span class="floating-icon" style="--delay: 0s;">üè≠</span>
        <span class="floating-icon" style="--delay: 1s;">üßµ</span>
        <span class="floating-icon" style="--delay: 2s;">üë•</span>
        <span class="floating-icon" style="--delay: 3s;">üéì</span>
      </div>
    </div>
    <div class="hero-content">
      <h1 class="hero-title">{{ data.hero.title }}</h1>
      <p class="hero-subtitle">{{ data.hero.subtitle }}</p>
      <p class="hero-description">{{ data.hero.description }}</p>
    </div>
  </section>

  <!-- Loading State -->
  <div class="loading-section" *ngIf="loading">
    <div class="loading-spinner">
      <div class="spinner"></div>
    </div>
    <p class="loading-text">Loading production data...</p>
  </div>



  <!-- Production Centers Section -->
  <section class="centers-section" #centersSection>
    <div class="container">


      <!-- Centers Loading -->
      <div class="centers-loading" *ngIf="centersLoading">
        <div class="loading-grid">
          <div class="skeleton-card" *ngFor="let item of [1,2,3,4,5,6,7,8]"></div>
        </div>
      </div>

      <!-- Centers Grid -->
      <div class="centers-grid" *ngIf="!centersLoading && (centers$ | async) as centers">
        <div class="center-card" 
             *ngFor="let center of centers; trackBy: trackByCenterId; let i = index"
             [attr.data-index]="i">
          <div class="card-image">
            <img [src]="center.image" [alt]="center.name" loading="lazy">
            <div class="card-overlay">
              <span class="center-type-badge" [class]="getCenterTypeBadge(center.type)">
                {{ center.type | titlecase }}
              </span>
            </div>
          </div>
          
          <div class="card-content">
            <div class="card-header">
              <h3 class="center-name">{{ center.name }}</h3>
              <p class="center-location">
                <span class="location-icon">üìç</span>
                {{ center.location }}, {{ center.district }}
              </p>
            </div>
            
            <p class="center-description">{{ center.description }}</p>
            
            <div class="center-features">
              <div class="features-list">
                <span class="feature-tag" *ngFor="let feature of center.features">
                  {{ feature }}
                </span>
              </div>
            </div>
            

            
            <div class="card-actions">
              <a class="center-btn" [routerLink]="center.routerLink">
                <span class="btn-text">Learn More</span>
                <span class="btn-icon">‚Üí</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Videos Section -->
  <section class="videos-section" #videosSection>
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Production & Training Videos</h2>
        <p class="section-subtitle">Watch our training programs and production processes</p>
      </div>

      <!-- Videos Loading -->
      <div class="videos-loading" *ngIf="videosLoading">
        <div class="loading-videos">
          <div class="skeleton-video" *ngFor="let item of [1,2,3]"></div>
        </div>
      </div>

      <!-- Videos Grid -->
      <div class="videos-grid" *ngIf="!videosLoading && (videos$ | async) as videos">
        <div class="video-card" 
             *ngFor="let video of videos; trackBy: trackByVideoId; let i = index"
             [attr.data-index]="i">
          <div class="video-container">
            <iframe 
              [src]="getSafeVideoUrl(video.youtubeId)" 
              [title]="video.title"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin" 
              allowfullscreen
              loading="lazy">
            </iframe>
            <!-- Fallback thumbnail (disabled for now) -->
            <div class="video-thumbnail" *ngIf="false">
              <img [src]="'https://img.youtube.com/vi/' + video.youtubeId + '/maxresdefault.jpg'" 
                   [alt]="video.title">
              <div class="play-button">‚ñ∂</div>
            </div>
          </div>
          
          <div class="video-content">
            <div class="video-header">
              <h3 class="video-title">{{ video.title }}</h3>
              <span class="video-category-badge" [class]="getVideoCategoryBadge(video.category)">
                {{ video.category | titlecase }}
              </span>
            </div>
            
            <p class="video-description">{{ video.description }}</p>
            
            <div class="video-meta">
              <div class="meta-item" *ngIf="video.duration">
                <span class="meta-icon">‚è±Ô∏è</span>
                <span class="meta-text">{{ video.duration }}</span>
              </div>
              <div class="meta-item" *ngIf="video.uploadDate">
                <span class="meta-icon">üìÖ</span>
                <span class="meta-text">{{ video.uploadDate | date:'mediumDate' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>