<!-- Modern Gallery Section -->
<section class="gallery-section">
  <!-- Section Header -->
  <div class="section-header">
    <h2 class="section-title">Our Heritage Collection</h2>
    <p class="section-subtitle">
      Discover authentic Khadi products, traditional crafts, and visit our outlets across Sikkim
    </p>
    
    <!-- Category Stats -->
    <div class="category-stats" *ngIf="galleryStats$ | async as stats">
      <div class="stat-item">
        <span class="stat-number">{{ stats.products }}</span>
        <span class="stat-label">Products</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ stats.outlets }}</span>
        <span class="stat-label">Outlets</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ stats.production }}</span>
        <span class="stat-label">Centers</span>
      </div>
    </div>
  </div>

  <!-- Gallery Grid -->
  <div class="gallery-container">
    <div class="gallery-grid" *ngIf="galleryItems$ | async as items; else loadingTemplate">
      <article 
        class="gallery-item" 
        *ngFor="let item of visibleItems; trackBy: trackByItemId"
        [class]="'size-' + item.size"
        [class.loaded]="item.loaded"
        appLazyLoad
        (appear)="onItemAppear(item)"
      >
        <!-- Image Container -->
        <div class="item-image-container">
          <img 
            [src]="item.imageUrl" 
            [alt]="item.alt"
            class="item-image"
            [class.loaded]="item.loaded"
            (load)="onImageLoad(item)"
            (error)="onImageError(item)"
            loading="lazy"
          >
          
          <!-- Loading Placeholder -->
          <div class="image-placeholder" *ngIf="!item.loaded">
            <div class="placeholder-shimmer"></div>
          </div>
          
          <!-- Category Badge -->
          <div class="category-badge" [class]="'badge-' + item.category">
            {{ getCategoryLabel(item.category) }}
          </div>
          
          <!-- Overlay -->
          <a 
            [routerLink]="item.route" 
            class="item-overlay"
            [attr.aria-label]="'View ' + item.title"
          >
            <div class="overlay-content">
              <h3 class="item-title">{{ item.title }}</h3>
              <p class="item-description" *ngIf="item.description">{{ item.description }}</p>
              
              <div class="item-action">
                <span class="action-text">Explore More</span>
                <span class="action-icon" aria-hidden="true">â†’</span>
              </div>
            </div>
          </a>
        </div>
      </article>
    </div>
    
    <!-- Load More Trigger -->
    <div 
      class="load-more-trigger" 
      appLazyLoad 
      (appear)="loadMoreItems()"
      *ngIf="hasMoreItems"
    >
      <div class="loading-indicator">
        <div class="spinner"></div>
        <span>Loading more items...</span>
      </div>
    </div>
  </div>
  
  <!-- Loading Template -->
  <ng-template #loadingTemplate>
    <div class="gallery-grid loading">
      <div class="gallery-item skeleton" *ngFor="let item of [1,2,3,4,5,6]">
        <div class="item-image-container skeleton-image"></div>
      </div>
    </div>
  </ng-template>
</section>